"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},_createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),CFCMRailwayCalendar=function(){function e(t){_classCallCheck(this,e),this.initVal(t)}return _createClass(e,[{key:"getId",value:function(e){return document.getElementById(e)}},{key:"getClassAll",value:function(e){return document.querySelectorAll(e)}},{key:"remove",value:function(e){var t=e.parentNode;t&&t.removeChild(e)}},{key:"initVal",value:function(e){var t={id:"dates",addid:"add",lessid:"less",date:!1,datelen:7,partline:"-",type:"init",callback:!1,lostday:!1,addeventflag:!0,lesseventflag:!0};if(this.cfg={},_extends(this.cfg,t,e),this.cfg.showObj=this.getId(this.cfg.id),!this.cfg.showObj)return!1;this.initCommonVal()}},{key:"initCommonVal",value:function(){var e=this.cfg,t=void 0,a=void 0;if(e.date?(t=e.date.split(" ")[0].split(e.partline),(a={}).y=t[0],a.m=t[1],a.d=t[2],e.date=this.dateFormcat(a,"ymd")):e.date=this.dateFormcat("",!1),e.lostday){var s=new Date(e.date.dates);switch(s.getDay()){case 1:case 2:case 3:case 4:case 5:case 6:e.lostday=s.getDay()-1,s=s.getTime()-24*e.lostday*3600*1e3;break;case 0:e.lostday=6,s=s.getTime()-5184e5}e.date&&(e.date=this.dateFormcat(s,"time"))}this.appendDom("init")}},{key:"appendDom",value:function(e){this.cfg.showObj.innerHTML="";var t=this.cfg,a="",s=void 0,n=void 0;switch(e){case"add":t.date=this.dateFormcat(t.date.time+864e5*t.datelen,"time");break;case"less":t.date=this.dateFormcat(t.date.time-864e5*t.datelen,"time")}for(var i=0;i<t.datelen;i++){if(s=t.date.time+864e5*i,n=this.dateFormcat(s,"time"),t.lostday){if(t.date.time+24*t.lostday*3600*1e3==n.time){t.selectedId=n.time,a+='<span class="selected" id="'+n.time+'">'+n.month+"-"+n.day+this.numTOweek(n.week)+"</span>";continue}}else if(t.date.time==n.time){t.selectedId=n.time,a+='<span class="selected" id="'+n.time+'">'+n.month+"-"+n.day+this.numTOweek(n.week)+"</span>";continue}a+='<span id="'+n.time+'">'+n.month+"-"+n.day+this.numTOweek(n.week)+"</span>"}this.cfg.showObj.innerHTML=a,this.spanEvent()}},{key:"dateFormcat",value:function(e,t){var a={};return"ymd"==t?a.dates=new Date(e.y,e.m-1,e.d,0,0,0):t?"time"==t&&(a.dates=new Date(e)):a.dates=new Date,a.week=a.dates.getDay(),a.year=a.dates.getFullYear(),a.month=a.dates.getMonth()+1,a.day=a.dates.getDate(),a.week=a.dates.getDay(),a.time=a.dates.getTime(),a}},{key:"numTOweek",value:function(e){switch(e){case 0:return"周日";case 1:return"周一";case 2:return"周二";case 3:return"周三";case 4:return"周四";case 5:return"周五";case 6:return"周六"}}},{key:"spanEvent",value:function(){var e=this,t=this.cfg.showObj.querySelectorAll("span");Array.prototype.slice.call(t).forEach(function(t){t.onmouseover=function(){e.cfg.showObj.querySelector(".selected").removeAttribute("class"),this.setAttribute("class","selected")},t.onmouseout=function(){this.removeAttribute("class"),this.removeAttribute("style"),e.getId(e.cfg.selectedId).setAttribute("class","selected")},t.onclick=function(){e.cfg.selectedId=this.getAttribute("id"),"function"==typeof e.cfg.callback&&e.cfg.callback(e.dateFormcat(parseInt(this.getAttribute("id")),"time"))}}),this.getId(this.cfg.addid).onclick=function(){e.cfg.addeventflag&&(e.appendDom("add"),"function"==typeof e.cfg.callback&&e.cfg.callback(e.dateFormcat(parseInt(e.cfg.selectedId),"time")))},this.getId(this.cfg.lessid).onclick=function(){e.cfg.lesseventflag&&(e.appendDom("less"),"function"==typeof e.cfg.callback&&e.cfg.callback(e.dateFormcat(parseInt(e.cfg.selectedId),"time")))}}}]),e}();
export function CFCMRailwayCalendar(param, fn) {
		return new CFCMRailwayCalendar(param, fn)
	}